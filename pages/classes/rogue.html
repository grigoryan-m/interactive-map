<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF–8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <base href="{{site.baseurl}}" />
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/class.css">
    <script src="/js/header.js"></script>
    <title>Плут</title>
</head>
<body data-class="rogue">
    <div class="center">
        <div class="center">
            <section class="">
                
            <h2>Плут</h2>
            <div class="tree">
                <h4>Описания веток</h4>
                <div class="level">
                    <div class="ability"><img src="/res/icons/questionmark.jpg" alt="">
                    <p>Воровство – фокус на утилитарных навыках (кража, взлом, обман).</p></div>
                    <div class="ability">
                        <img src="/res/icons/questionmark.jpg" alt="">
                        <p>Скрытность – улучшение незаметности, уклонения и тактического позиционирования.</p>
                    </div>
                    <div class="ability">
                        <img src="/res/icons/questionmark.jpg" alt="">
                        <p>Критические удары – усиление атакующих возможностей, особенно в неожиданных атаках.</p>
                    </div>
                </div>
                <hr/>
                <!-- Уровень 0 -->  
<div class="level" data-level="0">  
    <div class="ability" data-index="0">  
        <img src="/res/icons/Spell_Shadow_GhostKey.png" alt="">  
        <p><strong>Ловкие пальцы</strong> – Получаешь +2 к проверкам Ловкости при попытке подобрать карманы или открыть простой замок.</p>  
    </div>  
    <div class="ability" data-index="1">  
        <img src="/res/icons/Ability_Stealth.png" alt="">  
        <p><strong>Тихий шаг</strong> – Шум от твоего передвижения уменьшен, давая +2 к проверкам Скрытности при медленном перемещении.</p>  
    </div>  
    <div class="ability" data-index="2">  
        <img src="/res/icons/Ability_Rogue_Ambush.png" alt="">  
        <p><strong>Точный удар</strong> – Если атакуешь противника, который тебя не замечает, получаешь +1к4 к урону.</p>  
    </div>  
</div>  

<!-- Уровень 1 -->  
<div class="level" data-level="1">  
    <div class="ability" data-index="3">  
        <img src="/res/icons/INV_Misc_Bag_11.png" alt="">  
        <p><strong>Карманная кража</strong> – Раз в день можешь попытаться украсть мелкий предмет у NPC с преимуществом.</p>  
    </div>  
    <div class="ability" data-index="4">  
        <img src="/res/icons/Ability_Vanish.png" alt="">  
        <p><strong>Исчезновение</strong> – В бою можешь попытаться скрыться, даже если не находишься в тени или укрытии, но если не находишься под прямым взглядом (проверка Скрытности с помехой). Перемещение сбивает скрытность.</p>  
    </div>  
    <div class="ability" data-index="5">  
        <img src="/res/icons/Ability_CriticalStrike.png" alt="">  
        <p><strong>Сквозная рана</strong> – При критическом ударе противник теряет 1 дополнительное ОЗ в начале своего хода (1 раунд).</p>  
    </div>  
</div>  

<!-- Уровень 2 -->  
<div class="level" data-level="2">  
    <div class="ability" data-index="6">  
        <img src="/res/icons/Ability_Repair.png" alt="">  
        <p><strong>Взлом замков</strong> – Теперь можешь открывать замки средней сложности.</p>  
    </div>  
    <div class="ability" data-index="7">  
        <img src="/res/icons/Spell_Shadow_MindSteal.png" alt="">  
        <p><strong>Скрытное перемещение</strong> – Если скрываешься успешно, можешь передвинуться на 5 футов без штрафа.</p>  
    </div>  
    <div class="ability" data-index="8">  
        <img src="/res/icons/Ability_DualWield.png" alt="">  
        <p><strong>Двойной удар</strong> – При атаке с двух рук, вторая атака получает +1 к броску.</p>  
    </div>  
</div>  

<!-- Уровень 3 -->  
<div class="level" data-level="3">  
    <div class="ability" data-index="9">  
        <img src="/res/icons/Ability_Rogue_Disguise.png" alt="">  
        <p><strong>Поддельные документы</strong> – Можешь создавать поддельные письма или пропуска (проверка Интеллекта).</p>  
    </div>  
    <div class="ability" data-index="10">  
        <img src="/res/icons/Ability_Rogue_Feint.png" alt="">  
        <p><strong>Финт</strong> – Раз в бой можешь отвлечь противника, давая себе преимущество на следующую атаку.</p>  
    </div>  
    <div class="ability" data-index="11">  
        <img src="/res/icons/Ability_Rogue_SliceDice.png" alt="">  
        <p><strong>Быстрая рука</strong> – Если попадаешь по противнику, можешь сразу же нанести дополнительно 2к12 урона (1 раз в бой).</p>  
    </div>  
</div>  

<!-- Уровень 4 -->  
<div class="level" data-level="4">  
    <div class="ability" data-index="12">  
        <img src="/res/icons/SteadyShot.png" alt="">  
        <p><strong>Саботаж</strong> – Можешь незаметно повредить механизм или оружие врага (проверка Ловкости).</p>  
    </div>  
    <div class="ability" data-index="13">  
        <img src="/res/icons/INV_Shirt_Grey_01.png" alt="">  
        <p><strong>Теневой танец</strong> – В темноте получаешь +2 к КД против дальних атак.</p>  
    </div>  
    <div class="ability" data-index="14">  
        <img src="/res/icons/CriticalShot.png" alt="">  
        <p><strong>Меткий бросок</strong> – Дальнобойные атаки имеют +2 к попаданию, если цель не видит тебя.</p>  
    </div>  
</div>  

<!-- Уровень 5 -->  
<div class="level" data-level="5">  
    <div class="ability" data-index="15">  
        <img src="/res/icons/INV_Misc_Head_Undead_02.png" alt="">  
        <p><strong>Искусный обманщик</strong> – Получаешь +2 к проверкам Обмана и Ловкости рук.</p>  
    </div>  
    <div class="ability" data-index="16">  
        <img src="/res/icons/INV_Misc_Cape_02.png" alt="">  
        <p><strong>Плащ теней</strong> – В темноте твои критические попадания наносят на 1к8 больше урона.</p>  
    </div>  
    <div class="ability" data-index="17">  
        <img src="/res/icons/INV_Misc_Bone_HumanSkull_01.png" alt="">  
        <p><strong>Кровавая метка</strong> – Критический удар оставляет рану, снижая КД цели на 1 до конца боя (макс. -3).</p>  
    </div>  
</div>  
<!-- Уровень 6 -->
<div class="level" data-level="6">
    <div class="ability" data-index="18">
        <img src="/res/icons/INV_Misc_Gift_01.png" alt="">
        <p><strong>Точный захват</strong> – При успешной краже можно незаметно изъять предмет даже из застегнутой сумки (проверка Ловкости с преимуществом).</p>
    </div>
    <div class="ability" data-index="19">
        <img src="/res/icons/FelRush.png" alt="">
        <p><strong>Бесшумное падение</strong> – При падении с высоты до 10 футов не производишь шума и не получаешь урона.</p>
    </div>
    <div class="ability" data-index="20">
        <img src="/res/icons/PsychicScream.png" alt="">
        <p><strong>Смертельный укол</strong> – Критические попадания по спящим или ошеломлённым целям наносят дополнительно 1к6 урона.</p>
    </div>
</div>

<!-- Уровень 7 -->
<div class="level" data-level="7">
    <div class="ability" data-index="21">
        <img src="/res/icons/Spell_Shadow_SummonSuccubus.png" alt="">
        <p><strong>Отвлекающий манёвр</strong> – Твои проверки Обмана на отвлечение внимания проходят с преимущестом.</p>
    </div>
    <div class="ability" data-index="22">
        <img src="/res/icons/MetamorphosisHavoc.png" alt="">
        <p><strong>Теневой двойник</strong> – При скрытии можешь оставить ложный след в противоположном направлении.</p>
    </div>
    <div class="ability" data-index="23">
        <img src="/res/icons/LivingBomb.png" alt="">
        <p><strong>Разрывная рана</strong> – Критические удары оставляют кровоточащие раны (1 урон за раунд в течение 3 раундов).</p>
    </div>
</div>

<!-- Уровень 8 -->
<div class="level" data-level="8">
    <div class="ability" data-index="24">
        <img src="/res/icons/Spell_Shadow_RaiseDead.png" alt="">
        <p><strong>Мастер перевоплощения</strong> – Можешь создавать простые маскировки за 10 минут (проверка Ловкости рук).</p>
    </div>
    <div class="ability" data-index="25">
        <img src="/res/icons/Ability_Rogue_Trip.png" alt="">
        <p><strong>Призрачный шаг</strong> – Можешь незаметно перелезть через препятствие высотой не больше 10 футов (проверка Ловкости).</p>
    </div>
    <div class="ability" data-index="26">
        <img src="/res/icons/Ability_Racial_BearForm.png" alt="">
        <p><strong>Серьёзная травма</strong> – Критические удары снижают скорость цели на 20 футов на 1 раунд.</p>
    </div>
</div>

<!-- Уровень 9 -->
<div class="level" data-level="9">
    <div class="ability" data-index="27">
        <img src="/res/icons/INV_Letter_09.png" alt="">
        <p><strong>Похищение рецептов</strong> – Можешь скопировать простой рецепт или чертёж, увидев его на 1 минуту.</p>
    </div>
    <div class="ability" data-index="28">
        <img src="/res/icons/Ability_Vanish.png" alt="">
        <p><strong>Исчезновение</strong> – В бою можешь попытаться скрыть одного союзника, если он находится в тени (Проверка Ловкости)</p>
    </div>
    <div class="ability" data-index="29">
        <img src="/res/icons/Ability_CriticalStrike.png" alt="">
        <p><strong>Удар в почки</strong> – Критические удары сзади оглушают цель на 1 раунд (Спасбросок Телосложения).</p>
    </div>
</div>

<!-- Уровень 10 -->
<div class="level" data-level="10">
    <div class="ability" data-index="30">
        <img src="/res/icons/Ability_Repair.png" alt="">
        <p><strong>Взлом сейфов</strong> – Можешь вскрывать сложные замки за вдвое меньшее время.</p>
    </div>
    <div class="ability" data-index="31">
        <img src="/res/icons/PsychicLink.png" alt="">
        <p><strong>Теневой прыжок</strong> – Можешь телепортироваться на 15 футов (3 раза/день).</p>
    </div>
    <div class="ability" data-index="32">
        <img src="/res/icons/Obliterate.png" alt="">
        <p><strong>Смертельный танец</strong> – При убийстве врага получаешь дополнительное действие для атаки.</p>
    </div>
</div>

<!-- Уровень 11 -->
<div class="level" data-level="11">
    <div class="ability" data-index="33">
        <img src="/res/icons/INV_Misc_Note_02.png" alt="">
        <p><strong>Подмена документов</strong> – Можешь незаметно заменить один небольшой документ на другой (Проверка Ловкости рук).</p>
    </div>
    <div class="ability" data-index="34">
        <img src="/res/icons/INV_Helmet_02.png" alt="">
        <p><strong>Маскировка в толпе</strong> – В населённом месте можешь скрыться, просто смешавшись с толпой.</p>
    </div>
    <div class="ability" data-index="35">
        <img src="/res/icons/INV_Gauntlets_23.png" alt="">
        <p><strong>Смертельная точность</strong> – Критические удары игнорируют сопротивление к урону.</p>
    </div>
</div>
<!-- Уровень 12 -->
<div class="level" data-level="12">
    <div class="ability" data-index="36">
        <img src="/res/icons/FlashOfLight.png" alt="">
        <p><strong>Иллюзионист</strong> – Можешь создавать простые оптические иллюзии для отвлечения (1/день).</p>
    </div>
    <div class="ability" data-index="37">
        <img src="/res/icons/ShadowProtection.png" alt="">
        <p><strong>Призрачный вихрь</strong> – При получении урона можешь реакцией телепортироваться на 10 футов в тень (3/день).</p>
    </div>
    <div class="ability" data-index="38">
        <img src="/res/icons/Shockwave.png" alt="">
        <p><strong>Кровавый танец</strong> – Каждое убийство в бою даёт +2 к урону до конца схватки (макс. +6).</p>
    </div>
</div>

<!-- Уровень 13 -->
<div class="level" data-level="13">
    <div class="ability" data-index="39">
        <img src="/res/icons/ShadowFiend.png" alt="">
        <p><strong>Чародейский карманник</strong> – Можешь попытаться украсть зачарованный предмет (с риском проклятия).</p>
    </div>
    <div class="ability" data-index="40">
        <img src="/res/icons/Ability_Rogue_Feint.png" alt="">
        <p><strong>Теневой клон</strong> – При скрытии оставляешь после себя полупрозрачный двойник на 1 раунд.</p>
    </div>
    <div class="ability" data-index="41">
        <img src="/res/icons/Ability_Rogue_SliceDice.png" alt="">
        <p><strong>Смертельный вихрь</strong> – При критическом ударе получаешь дополнительную атаку по другой цели.</p>
    </div>
</div>

<!-- Уровень 14 -->
<div class="level" data-level="14">
    <div class="ability" data-index="42">
        <img src="/res/icons/INV_Letter_16.png" alt="">
        <p><strong>Мастер подлога</strong> – Можешь идеально подделывать печати и подписи (проверка Ловкости рук с преимуществом).</p>
    </div>
    <div class="ability" data-index="43">
        <img src="/res/icons/Ability_Vanish.png" alt="">
        <p><strong>Исчезновение мастера</strong> – Можешь скрыться даже под прямым взглядом (1/день, с помехой).</p>
    </div>
    <div class="ability" data-index="44">
        <img src="/res/icons/Ability_CriticalStrike.png" alt="">
        <p><strong>Сердцеед</strong> – Критические удары наносят дополнительно 1к20 урона.</p>
    </div>
</div>

<!-- Уровень 15 -->
<div class="level" data-level="15">
    <div class="ability" data-index="45">
        <img src="/res/icons/Ability_Repair.png" alt="">
        <p><strong>Взлом магии</strong> – Можешь пытаться вскрывать магические замки (проверка Ловкости + Интеллекта).</p>
    </div>
    <div class="ability" data-index="46">
        <img src="/res/icons/INV_Misc_Ear_NightElf_01.png" alt="">
        <p><strong>Теневой слизень</strong> – Можешь проходить сквозь узкие щели (до 4 дюймов) как жидкая тень.</p>
    </div>
    <div class="ability" data-index="47">
        <img src="/res/icons/Ability_DualWield.png" alt="">
        <p><strong>Танец клинков</strong> – При двойной атаке второе попадание автоматически становится критическим.</p>
    </div>
</div>

<!-- Уровень 16 -->
<div class="level" data-level="16">
    <div class="ability" data-index="48">
        <img src="/res/icons/INV_Misc_Orb_02.png" alt="">
        <p><strong>Король мошенников</strong> – Можешь попробовать "украсть" эффект зелья, просто увидев его применение (проверка Ловкости + Интеллекта).</p>
    </div>
    <div class="ability" data-index="49">
        <img src="/res/icons/Spell_Shadow_NightOfTheDead.png" alt="">
        <p><strong>Тень ночи</strong> – В полной темноте становишься невидимым даже для тёмного зрения.</p>
    </div>
    <div class="ability" data-index="50">
        <img src="/res/icons/INV_Misc_Bomb_08.png" alt="">
        <p><strong>Смертельный ураган</strong> – Все атаки считаются критическими при броске выше 18.</p>
    </div>
</div><!-- Уровень 17 -->
<div class="level" data-level="17">
    <div class="ability" data-index="51">
        <img src="/res/icons/INV_Jewelry_Ring_08.png" alt="">
        <p><strong>Кража судьбы</strong> – Можешь попытаться "украсть" один положительный эффект у цели и перенести на себя (1/день, проверка Ловкости против Харизмы).</p>
    </div>
    <div class="ability" data-index="52">
        <img src="/res/icons/INV_Helmet_30.png" alt="">
        <p><strong>Теневой покров</strong> – Бонусным действием можешь обернуться тенями, получая сопротивление всем видам урона на 1 раунд (3/день).</p>
    </div>
    <div class="ability" data-index="53">
        <img src="/res/icons/Dash.png" alt="">
        <p><strong>Танец смерти</strong> – Каждое попадание полностью восстанавливает передвижение.</p>
    </div>
</div>

<!-- Уровень 18 -->
<div class="level" data-level="18">
    <div class="ability" data-index="54">
        <img src="/res/icons/BloodPlague.png" alt="">
        <p><strong>Кража памяти</strong> – Можешь незаметно подменить или стереть до 1 часа воспоминаний у существа (проверка Ловкости против Мудрости, 1/неделю).</p>
    </div>
    <div class="ability" data-index="55">
        <img src="/res/icons/AbolishMagic.png" alt="">
        <p><strong>Призрачный мираж</strong> – Создаёшь до трёх иллюзорных копий себя, которые повторяют твои движения (концентрация, до 1 минуты).</p>
    </div>
    <div class="ability" data-index="56">
        <img src="/res/icons/Ability_Warrior_PunishingBlow.png" alt="">
        <p><strong>Смертельный вихрь</strong> – При убийстве врага все атаки против соседних целей автоматически считаются критическими до конца твоего хода.</p>
    </div>
</div>

<!-- Уровень 19 -->
<div class="level" data-level="19">
    <div class="ability" data-index="57">
        <img src="/res/icons/INV_Misc_Bag_11.png" alt="">
        <p><strong>Кража сущности</strong> – Можешь бонусным действием попытаться на 1 раунд заимствовать классовую способность, применение которой ты видел в течение предыдущих 5 минут (проверка Интеллекта).</p>
    </div>
    <div class="ability" data-index="58">
        <img src="/res/icons/Ability_Warrior_Revenge.png" alt="">
        <p><strong>Тень между мирами</strong> – Можешь на 1 раунд полностью исчезнуть из этого плана существования, становясь неуязвимым.</p>
    </div>
    <div class="ability" data-index="59">
        <img src="/res/icons/Ability_CriticalStrike.png" alt="">
        <p><strong>Фатальный финал</strong> – Критические удары по существам с менее 25% ХП наносят максимум урона.</p>
    </div>
</div>
            </div>
            <button id="save">Сохранить</button>
            </section>
        </div>
    </div>

    <script src="/js/main.js"></script>
    <script>
document.addEventListener("DOMContentLoaded", () => {
    const className = document.body.dataset.class; // Убедись, что <body> имеет data-class="warrior"
    if (!className) {
        console.error("Не указан класс персонажа!");
        return;
    }

    const storageKey = `skillTree_${className}`;
    let skills = localStorage.getItem(storageKey) ? localStorage.getItem(storageKey).split("").map(Number) : new Array(20).fill(0);

    const levels = document.querySelectorAll(".level");

    // Обновляет UI на основе текущих данных
    function updateUI() {
        levels.forEach((level, levelIndex) => {
            level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                ability.classList.toggle("active", skills[levelIndex] === abilityIndex + 1);
            });
        });
    }

    // Выбор или отмена выбора умения
    function handleSkillSelect(levelIndex, abilityIndex) {
        if (skills[levelIndex] === abilityIndex + 1) {
            skills[levelIndex] = 0; // Снимаем выбор
        } else {
            skills[levelIndex] = abilityIndex + 1; // Выбираем новое умение
        }
        updateUI();
    }

    // Назначаем обработчики событий на каждое умение
    levels.forEach((level, levelIndex) => {
        level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
            ability.addEventListener("click", () => handleSkillSelect(levelIndex, abilityIndex));
            ability.addEventListener("touchend", (event) => {
                event.preventDefault(); // Убирает задержку на мобильных
                handleSkillSelect(levelIndex, abilityIndex);
            });
        });
    });

    // Кнопка "Сохранить"
    document.getElementById("save").addEventListener("click", () => {
        localStorage.setItem(storageKey, skills.join("")); // Сохраняем как строку
        alert("Умения сохранены!");
    });

    // Загружаем умения при старте
    updateUI();
});
    </script>
    </body>