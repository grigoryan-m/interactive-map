<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF–8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <base href="https://grigoryan-m.github.io/interactive-map/" />
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/class.css">
    <script src="js/header.js"></script>
    <title>Жрец</title>
</head>
<html>
    <body data-class="priest">

        <div class="center">
            <section class="">
                <h2>Жрец</h2>
                <div class="tree">
                    <h4>Описания веток</h4>
                    <div class="level">
                        <div class="ability"><img src="res/icons/questionmark.jpg" alt="">
                        <p>Светоч Веры - исцеление и благословения</p></div>
                        <div class="ability">
                            <img src="res/icons/questionmark.jpg" alt="">
                            <p>Теневой Покров - темная магия и проклятия</p>
                        </div>
                        <div class="ability">
                            <img src="res/icons/questionmark.jpg" alt="">
                            <p>Равновесие - баланс света и тьмы</p>
                        </div>
                    </div>
                    <hr/>
        
                    <!-- Уровень 0 (1 уровень персонажа) -->
<!-- Уровень 1 (Базовые способности) -->
<div class="level" data-level="0">
    <!-- Светоч Веры -->
    <div class="ability" data-index="0">
        <img src="res/icons/BlessedHands.png" alt="">
        <p><strong>Прикосновение Света</strong> — Исцеляет союзника на 1d8 + Мудрость. (3/день)</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="1">
        <img src="res/icons/Spell_Shadow_ShadowWordPain.png" alt="">
        <p><strong>Слово Тьмы: Боль</strong> — Враг получает 1d6 урона каждый раунд (3 раунда). Спасбросок Телосложения, концентрация.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="2">
        <img src="res/icons/DivineAegis.png" alt="">
        <p><strong>Щит Равновесия</strong> — Даёт +2 КД и сопротивление свету/тьме на 1 минуту (себя или союзника, концентрация).</p>
    </div>
</div>

<!-- Уровень 2 -->
<div class="level" data-level="1">
    <!-- Светоч Веры -->
    <div class="ability" data-index="3">
        <img src="res/icons/HolyNova.png" alt="">
        <p><strong>Священная Вспышка</strong> — Лечит союзников на 1d6 в радиусе 10 футов.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="4">
        <img src="res/icons/Spell_Shadow_EvilEye.png" alt="">
        <p><strong>Теневой Шёпот</strong> — Пугает врага на 1 раунд (дистанция 30 футов). Спасбросок Мудрости. (2/бой)</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="5">
        <img src="res/icons/INV_Gauntlets_02.png" alt="">
        <p><strong>Внутренний Огонь</strong> — Ваши атаки ближнего боя наносят дополнительно +1d4 светлого урона (1 минута, концентрация). 2 раза в день.</p>
    </div>
</div>

<!-- Уровень 3 -->
<div class="level" data-level="2">
    <!-- Светоч Веры -->
    <div class="ability" data-index="6">
        <img src="res/icons/PrayerOfMending.png" alt="">
        <p><strong>Молитва Восстановления</strong> — Исцеляете союзника реакцией на 1d6 при получении урона (3/бой).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="7">
        <img src="res/icons/Spell_Shadow_PlagueCloud.png" alt="">
        <p><strong>Чумное Прикосновение</strong> — Следующая ваша атака нанесет дополнительно 1d8 некротического урона + легкое кровотечение.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="8">
        <img src="res/icons/INV_Jewelry_Ring_29.png" alt="">
        <p><strong>Печать Мудрости</strong> — +1d4 к спасброскам Мудрости для вас и союзников в радиусе 15 футов.</p>
    </div>
</div>

<!-- Уровень 4 -->
<div class="level" data-level="3">
    <!-- Светоч Веры -->
    <div class="ability" data-index="9">
        <img src="res/icons/HolyNova.png" alt="">
        <p><strong>Возрождающий Свет</strong> — Стабилизирует умирающего и восстанавливает 1 ХП (1 раз в день, даже в бою).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="10">
        <img src="res/icons/INV_Boots_01.png" alt="">
        <p><strong>Смертельная Петля</strong> — Выберите цель. Она получает 2d6 некротического урона + ее скорость уменьшается вдвое на 2 раунда.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="11">
        <img src="res/icons/INV_Misc_Bomb_08.png" alt="">
        <p><strong>Кара Небес</strong> — Когда существо проваливает спасбросок, вы можете реакцией нанести ему 1к8 некротического урона (+1к4 урона светом, если это нежить/демон)</p>
    </div>
</div>

<!-- Уровень 5 -->
<div class="level" data-level="4">
    <!-- Светоч Веры -->
    <div class="ability" data-index="12">
        <img src="res/icons/IceboundFortitude.png" alt="">
        <p><strong>Дух-Хранитель</strong> — +2 к спасброскам всем союзникам в радиусе 5 футов (пассивно).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="13">
        <img src="res/icons/Spell_Shadow_SummonVoidWalker.png" alt="">
        <p><strong>Призыв Теневого Демона</strong> — Демон (25 HP, 1d6+2 урон) сражается за вас 3 раунда (концентрация).</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="14">
        <img src="res/icons/INV_Misc_Cape_21.png" alt="">
        <p><strong>Божественный Щит</strong> — Реакцией можете поглотить 10 урона из получаемого урона (себя или союзника, радиус 30 футов, 3/бой).</p>
    </div>
</div>
<!-- Уровень 6 (6 уровень персонажа) -->
<div class="level" data-level="5">
    <div class="ability" data-index="15">
        <img src="res/icons/FlashOfLight.png" alt="">
        <p><strong>Мгновенное Исцеление</strong> - Восстанавливает 2d8+Мудрость хитов всем союзникам в радиусе 30 футов. 2 раза в день.</p>
    </div>
    <div class="ability" data-index="16">
        <img src="res/icons/Spell_Shadow_UnholyFrenzy.png" alt="">
        <p><strong>Крик Смерти</strong> - 1d6 некротического урона и -2 к атаке врагам в радиусе 15 футов (1 раунд).</p>
    </div>
    <div class="ability" data-index="17">
        <img src="res/icons/DivineStorm.png" alt="">
        <p><strong>Стойкость Духа</strong> - +2 к спасброскам против страха/очарования вам и союзникам (пассивно).</p>
    </div>
</div>

<!-- Уровень 7 (7 уровень персонажа) -->
<div class="level" data-level="6">
    <div class="ability" data-index="18">
        <img src="res/icons/HolyNova.png" alt="">
        <p><strong>Светящийся Источник</strong> - Создает исцеляющий тотем (1d6 хитов за заряд, 3 заряда, используется реакцией, радиус 10 футов). Длится 10 минут (концентрация).</p>
    </div>
    <div class="ability" data-index="19">
        <img src="res/icons/Darkness.png" alt="">
        <p><strong>Теневой Ореол</strong> - +2 КД против дальних атак на 3 раунда.</p>
    </div>
    <div class="ability" data-index="20">
        <img src="res/icons/ConsumeMagic.png" alt="">
        <p><strong>Поглощение Магии</strong> - Снимает 1 магический эффект (проверка Мудрости).</p>
    </div>
</div>

<!-- Уровень 8 (8 уровень персонажа) -->
<div class="level" data-level="7">
    <div class="ability" data-index="21">
        <img src="res/icons/PrayerOfMending.png" alt="">
        <p><strong>Божественный Гимн</strong> - Исцеляет союзников на 1d8/раунд в радиусе 30 футов (3 раунда, концентрация).</p>
    </div>
    <div class="ability" data-index="22">
        <img src="res/icons/RayOfHope.png" alt="">
        <p><strong>Теневое Восстановление</strong> - Исцеляет союзника на 6d8, но наносит 6d4 урона вам.</p>
    </div>
    <div class="ability" data-index="23">
        <img src="res/icons/SealOfFury.png" alt="">
        <p><strong>Небесная Кара</strong> - Следующая ваша атака наносит 2к8 урона некротической энергией и оглушает врага на 1 раунд.</p>
    </div>
</div>

<!-- Уровень 9 (9 уровень персонажа) -->
<div class="level" data-level="8">
    <div class="ability" data-index="24">
        <img src="res/icons/PowerWordBarrier.png" alt="">
        <p><strong>Духовное Возрождение</strong> - Концентрация <br> Если существо под этим эффектом становится недееспособным, оно автоматически воскрешается с 50% ХП (1 раз в 3 дня).</p>
    </div>
    <div class="ability" data-index="25">
        <img src="res/icons/PlagueStrike.png" alt="">
        <p><strong>Слово Тьмы: Смерть</strong> - 5d6 урона некротической энергией (если цель выживает, вы получаете 5d6 урона).</p>
    </div>
    <div class="ability" data-index="26">
        <img src="res/icons/Spell_Shadow_DetectLesserInvisibility.png" alt="">
        <p><strong>Чистое Сердце</strong> - Иммунитет к ядам/болезням на 4 часа (1/день).</p>
    </div>
</div>

<!-- Уровень 10 (10 уровень персонажа) -->
<div class="level" data-level="9">
    <div class="ability" data-index="27">
        <img src="res/icons/TowerOfLight.png" alt="">
        <p><strong>Обновление</strong> - Исцеляет 1d8+Мудрость/раунд (5 раундов, только 1 цель, концентрация).</p>
    </div>
    <div class="ability" data-index="28">
        <img src="res/icons/RuneTap.png" alt="">
        <p><strong>Нестабильное Наслаждение</strong> - 1d8 урона светом/раунд (концентрация, до 3 раундов). При снятии - взрыв на 5d6 в радиусе 20 футов (1/день).</p>
    </div>
    <div class="ability" data-index="29">
        <img src="res/icons/Spell_Shadow_EnslaveDemon.png" alt="">
        <p><strong>Печать Жертвенности</strong> - Исцеление +50%, но вы получаете 25% от исцеленного урона (1 час, концентрация).</p>
    </div>
</div>
<!-- Уровень 11 -->
<div class="level" data-level="10">
    <!-- Светоч Веры -->
    <div class="ability" data-index="30">
        <img src="res/icons/InfusionOfLight.png" alt="">
        <p><strong>Мгновенное Исцеление</strong><br>Восстанавливает 3d8 + Мудрость здоровья выбранному союзнику. Можно использовать 3 раза между отдыхами.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="31">
        <img src="res/icons/Spell_Shadow_ShadowWordPain.png" alt="">
        <p><strong>Проклятие Агонии</strong><br>Накладывает на врага проклятие, наносящее 2d6 урона в конце каждого его хода в течение 1 минуты. Спасбросок Телосложения.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="32">
        <img src="res/icons/INV_Belt_13.png" alt="">
        <p><strong>Печать Мудрости</strong><br>Каждая атака ваших союзников, которые находится в радуисе 5 футов от вас, наносит дополнительно 2к6 урона некротической энергией.</p>
    </div>
</div>

<!-- Уровень 12 -->
<div class="level" data-level="11">
    <!-- Светоч Веры -->
    <div class="ability" data-index="33">
        <img src="res/icons/RayOfHope.png" alt="">
        <p><strong>Молитва Исцеления</strong><br>Исцеляет всех союзников в радиусе 15 футов на 5d8 + Мудрость. Кастуется 1 раунд. 2 раза в день.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="34">
        <img src="res/icons/Spell_Shadow_SummonFelHunter.png" alt="">
        <p><strong>Крик Смерти</strong><br>Все враги в радиусе 10 футов получают 3d6 некротического урона и -2 к атаке на 2 раунда. Спасбросок Телосложения.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="35">
        <img src="res/icons/Spell_Shadow_UnholyFrenzy.png" alt="">
        <p><strong>Внутренний Свет</strong><br>Увеличивает ваш КД на 5 и наносит 1d6 урона светом атакующим вас врагам. Длится 10 минут (концентрация).</p>
    </div>
</div>

<!-- Уровень 13 -->
<div class="level" data-level="12">
    <!-- Светоч Веры -->
    <div class="ability" data-index="36">
        <img src="res/icons/TowerOfLight.png" alt="">
        <p><strong>Воскрешение Чемпиона</strong><br>Недееспособные союзники в радиусе 10 футов от вас неуязвимы.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="37">
        <img src="res/icons/TimeWarp.png" alt="">
        <p><strong>Темное Воздаяние</strong><br>Наносит 4d6 некротического урона и замедляет цель на 50% на 3 раунда. Спасбросок Мудрости.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="38">
        <img src="res/icons/Spell_Shadow_SealOfKings.png" alt="">
        <p><strong>Священная Волна</strong><br>Наносит 3d6 светлого урона врагам и исцеляет союзников на 3d6 в радиусе 15 футов. 1 раз в бой.</p>
    </div>
</div>
<!-- Уровень 14 -->
<div class="level" data-level="13">
    <!-- Светоч Веры -->
    <div class="ability" data-index="39">
        <img src="res/icons/INV_Drink_15.png" alt="">
        <p><strong>Массовое Воскрешение</strong><br>Утоляет жажду и голод. До 5 существ. Время накладывания: 10 минут, 1/неделя.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="40">
        <img src="res/icons/INV_Jewelry_Amulet_02.png" alt="">
        <p><strong>Проклятие Безмолвия</strong><br>Запрещает врагу использовать заклинания на 5 раундов. Спасбросок Интеллекта.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="41">
        <img src="res/icons/INV_Misc_ShadowEgg.png" alt="">
        <p><strong>Карающий Свет</strong><br>Наносит 4d8 светлого урона нежити/демонам или 2d8 остальным. Автоматически попадает по проклятым целям.</p>
    </div>
</div>

<!-- Уровень 15 -->
<div class="level" data-level="14">
    <!-- Светоч Веры -->
    <div class="ability" data-index="42">
        <img src="res/icons/INV_Misc_Rune_02.png" alt="">
        <p><strong>Божественная Защита</strong><br>Накладывает на союзника щит, который дает ему +5 КД. Действует 1 час, концентрация. 1 раз в день.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="43">
        <img src="res/icons/INV_Misc_Slime_01.png" alt="">
        <p><strong>Вирусная Чума</strong><br>Накладывает болезнь, которая наносит 1d6 урона/раунд и распространяется на 2 ближайших врага. Длится 1 минуту.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="44">
        <img src="res/icons/INV_Misc_Orb_05.png" alt="">
        <p><strong>Двойная Печать</strong><br>Помечает врага: 50% получаемого им исцеления преобразуется в урон. Длится 10 раундов.</p>
    </div>
</div>

<!-- Уровень 16 -->
<div class="level" data-level="15">
    <!-- Светоч Веры -->
    <div class="ability" data-index="45">
        <img src="res/icons/HolyNova.png" alt="">
        <p><strong>Гимн Надежды</strong><br>Исцеляет всех союзников в радиусе 30 футов на 9d8+Мудрость. Кастуется 2 раунда. 1 раз в день.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="46">
        <img src="res/icons/ShadowBolt.png" alt="">
        <p><strong>Слово Смерти</strong><br>Наносит 6d6 некротического урона. Если убивает врага - восстанавливает 50% урона как здоровье.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="47">
        <img src="res/icons/Spell_Shadow_RainOfFire.png" alt="">
        <p><strong>Сбалансированное Возмездие</strong><br>Наносит 3d6 светлого и 3d6 теневого урона. Можно выбрать до 6 целей (по 1d6 урона, 40 футов)</p>
    </div>
</div>

<!-- Уровень 17 -->
<div class="level" data-level="16">
    <!-- Светоч Веры -->
    <div class="ability" data-index="48">
        <img src="res/icons/SearingTotem.png" alt="">
        <p><strong>Божественная Форма</strong><br>На 5 раундов ваши заклинания наносят на 5к8 урона больше. 1 раз в день.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="49">
        <img src="res/icons/Spell_Shadow_SummonVoidWalker.png" alt="">
        <p><strong>Армия Теней</strong><br>Ваша следующая атака наносит 6d10 урона некротической энергией цели, которая находится в 5 футах от вас.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="50">
        <img src="res/icons/Spell_Shadow_Haunting.png" alt="">
        <p><strong>Сфера Гармонии</strong><br>Создает зону 20 футов, где союзники получают +3 к КД, а враги -3 к спасброскам (без концентрации, 1 бой, 1/день).</p>
    </div>
</div>

<!-- Уровень 18 -->
<div class="level" data-level="17">
    <!-- Светоч Веры -->
    <div class="ability" data-index="51">
        <img src="res/icons/HopeAndGrace.png" alt="">
        <p><strong>Священный Источник</strong><br>Создает целительный фонтан (5 зарядов по 4d8 здоровья). Длится 24 часа. 1 раз в день. Кастуется 4 часа.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="52">
        <img src="res/icons/Spell_Shadow_RaiseDead.png" alt="">
        <p><strong>Реквием</strong><br>Вся нежить в радиусе 30 футов начинает гореть и получает 5к10 урона (1/день вне боя).</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="53">
        <img src="res/icons/Halo.png" alt="">
        <p><strong>Магический Вакуум</strong><br>Поглощает все магические концентрации в радиусе 20 футов, преобразуя каждую в 5к10 хитов (цели исцеления можно выбирать).</p>
    </div>
</div>

<!-- Уровень 19 -->
<div class="level" data-level="18">
    <!-- Светоч Веры -->
    <div class="ability" data-index="54">
        <img src="res/icons/Incinerate.png" alt="">
        <p><strong>Божественное Вмешательство</strong><br>Мгновенно воскрешает всю группу с 50% здоровья и маны. 1 раз в неделю.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="55">
        <img src="res/icons/HungerForBlood.png" alt="">
        <p><strong>Покров Пустоты</strong><br>Делает вас невидимым и неуязвимым на 3 раунда. Выходя из режима, наносите 8d6 урона всем врагам вокруг.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="56">
        <img src="res/icons/HealingTide.png" alt="">
        <p><strong>Абсолютный Баланс</strong><br>На 1 минуту все ваши способности считаются одновременно уроном света и некротической энергией, игнорируя сопротивления.</p>
    </div>
</div>
<!-- Уровень 20 -->
<div class="level" data-level="19">
    <!-- Светоч Веры -->
    <div class="ability" data-index="57">
        <img src="res/icons/DivineAegis.png" alt="">
        <p><strong>Апофеоз Света</strong><br>На 1 минуту вы становитесь воплощением божественной воли:<br>
        • Ваши исцеления могут критовать<br>
        • Автоматически очищаете 1 негативный эффект с союзников каждые 2 раунда<br>
        • +5 КД всей группе<br>
        Перезарядка: 1 раз в 3 дня</p>
    </div>

    <!-- Теневой Покров -->
    <div class="ability" data-index="58">
        <img src="res/icons/BloodPlague.png" alt="">
        <p><strong>Вечное Проклятие</strong><br>Накладывает на врага неразрушимую печать:<br>
        • 6d8 некротического урона каждый раунд<br>
        • Не может быть излечено обычными способами<br>
        • Смерть цели наносит 5d6 урона всем врагам в 10 футах<br>
        Длится до конца боя. 1 цель одновременно. Перезарядка: 1 раз в 3 дня</p>
    </div>

    <!-- Равновесие -->
    <div class="ability" data-index="59">
        <img src="res/icons/Ability_DualWield.png" alt="">
        <p><strong>Совершенный Баланс</strong><br>Активируете абсолютную гармонию:<br>
        • Ваши атаки наносят дополнительно 50% от недостающего здоровья цели<br>
        • Исцеляете союзников на 50% от своего урона<br>
        • Иммунитет к контролю для вас и группы<br>
        Длится 3 раунда. Перезарядка: 1 день</p>
    </div>
</div>
            </div>
            <button id="save">Сохранить</button>
        </section>
        </div>
    <script src="js/main.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const className = document.body.dataset.class; // Убедись, что <body> имеет data-class="warrior"
        if (!className) {
            console.error("Не указан класс персонажа!");
            return;
        }

        const storageKey = `skillTree_${className}`;
        let skills = localStorage.getItem(storageKey) ? localStorage.getItem(storageKey).split("").map(Number) : new Array(20).fill(0);

        const levels = document.querySelectorAll(".level");

        // Обновляет UI на основе текущих данных
        function updateUI() {
            levels.forEach((level, levelIndex) => {
                level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                    ability.classList.toggle("active", skills[levelIndex] === abilityIndex + 1);
                });
            });
        }

        // Выбор или отмена выбора умения
        function handleSkillSelect(levelIndex, abilityIndex) {
            if (skills[levelIndex] === abilityIndex + 1) {
                skills[levelIndex] = 0; // Снимаем выбор
            } else {
                skills[levelIndex] = abilityIndex + 1; // Выбираем новое умение
            }
            updateUI();
        }

        // Назначаем обработчики событий на каждое умение
        levels.forEach((level, levelIndex) => {
            level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                ability.addEventListener("click", () => handleSkillSelect(levelIndex, abilityIndex));
                ability.addEventListener("touchend", (event) => {
                    event.preventDefault(); // Убирает задержку на мобильных
                    handleSkillSelect(levelIndex, abilityIndex);
                });
            });
        });

        // Кнопка "Сохранить"
        document.getElementById("save").addEventListener("click", () => {
            localStorage.setItem(storageKey, skills.join("")); // Сохраняем как строку
            alert("Умения сохранены!");
        });

        // Загружаем умения при старте
        updateUI();
    });
    </script>
    </body>
</html>