<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF–8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/class.css">
    <script src="/js/header.js"></script>
    <title>Жрец</title>
</head>
<html>
    <body data-class="priest">

        <div class="center">
            <section class="">
                <h2>Жрец</h2>
                <div class="tree">
                    <h4>Описания веток</h4>
                    <div class="level">
                        <div class="ability"><img src="/res/icons/questionmark.jpg" alt="">
                        <p>Светоч Веры - исцеление и благословения</p></div>
                        <div class="ability">
                            <img src="/res/icons/questionmark.jpg" alt="">
                            <p>Теневой Покров - темная магия и проклятия</p>
                        </div>
                        <div class="ability">
                            <img src="/res/icons/questionmark.jpg" alt="">
                            <p>Равновесие - баланс света и тьмы</p>
                        </div>
                    </div>
                    <hr/>
        
                    <!-- Уровень 0 (1 уровень персонажа) -->
<!-- Уровень 1 (Базовые способности) -->
<div class="level" data-level="0">
    <!-- Светоч Веры -->
    <div class="ability" data-index="0">
        <img src="/res/icons/BlessedHands.png" alt="">
        <p><strong>Прикосновение Света</strong> — Исцеляет союзника на 1d8 + Мудрость. (3/день)</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="1">
        <img src="/res/icons/Spell_Shadow_ShadowWordPain.png" alt="">
        <p><strong>Слово Тьмы: Боль</strong> — Враг получает 1d6 урона каждый раунд (3 раунда). Спасбросок Телосложения, концентрация.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="2">
        <img src="/res/icons/DivineAegis.png" alt="">
        <p><strong>Щит Равновесия</strong> — Даёт +2 КД и сопротивление свету/тьме на 1 минуту (себя или союзника, концентрация).</p>
    </div>
</div>

<!-- Уровень 2 -->
<div class="level" data-level="1">
    <!-- Светоч Веры -->
    <div class="ability" data-index="3">
        <img src="/res/icons/HolyNova.png" alt="">
        <p><strong>Священная Вспышка</strong> — Лечит союзников на 1d6 в радиусе 10 футов.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="4">
        <img src="/res/icons/Spell_Shadow_EvilEye.png" alt="">
        <p><strong>Теневой Шёпот</strong> — Пугает врага на 1 раунд (дистанция 30 футов). Спасбросок Мудрости. (2/бой)</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="5">
        <img src="/res/icons/INV_Gauntlets_02.png" alt="">
        <p><strong>Внутренний Огонь</strong> — Ваши атаки ближнего боя наносят дополнительно +1d4 светлого урона (1 минута, концентрация). 2 раза в день.</p>
    </div>
</div>

<!-- Уровень 3 -->
<div class="level" data-level="2">
    <!-- Светоч Веры -->
    <div class="ability" data-index="6">
        <img src="/res/icons/PrayerOfMending.png" alt="">
        <p><strong>Молитва Восстановления</strong> — Исцеляете союзника реакцией на 1d6 при получении урона (3/бой).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="7">
        <img src="/res/icons/Spell_Shadow_PlagueCloud.png" alt="">
        <p><strong>Чумное Прикосновение</strong> — Следующая ваша атака нанесет дополнительно 1d8 некротического урона + легкое кровотечение.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="8">
        <img src="/res/icons/INV_Jewelry_Ring_29.png" alt="">
        <p><strong>Печать Мудрости</strong> — +1d4 к спасброскам Мудрости для вас и союзников в радиусе 15 футов.</p>
    </div>
</div>

<!-- Уровень 4 -->
<div class="level" data-level="3">
    <!-- Светоч Веры -->
    <div class="ability" data-index="9">
        <img src="/res/icons/HolyNova.png" alt="">
        <p><strong>Возрождающий Свет</strong> — Стабилизирует умирающего и восстанавливает 1 ХП (1 раз в день, даже в бою).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="10">
        <img src="/res/icons/INV_Boots_01.png" alt="">
        <p><strong>Смертельная Петля</strong> — Выберите цель. Она получает 2d6 некротического урона + ее скорость уменьшается вдвое на 2 раунда.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="11">
        <img src="/res/icons/INV_Misc_Bomb_08.png" alt="">
        <p><strong>Кара Небес</strong> — Когда существо проваливает спасбросок, вы можете реакцией нанести ему 1к8 некротического урона (+1к4 урона светом, если это нежить/демон)</p>
    </div>
</div>

<!-- Уровень 5 -->
<div class="level" data-level="4">
    <!-- Светоч Веры -->
    <div class="ability" data-index="12">
        <img src="/res/icons/IceboundFortitude.png" alt="">
        <p><strong>Дух-Хранитель</strong> — +2 к спасброскам всем союзникам в радиусе 5 футов (пассивно).</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="13">
        <img src="/res/icons/Spell_Shadow_SummonVoidWalker.png" alt="">
        <p><strong>Призыв Теневого Демона</strong> — Демон (25 HP, 1d6+2 урон) сражается за вас 3 раунда (концентрация).</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="14">
        <img src="/res/icons/INV_Misc_Cape_21.png" alt="">
        <p><strong>Божественный Щит</strong> — Реакцией можете поглотить 10 урона из получаемого урона (себя или союзника, радиус 30 футов, 3/бой).</p>
    </div>
</div>
<!-- Уровень 6 (6 уровень персонажа) -->
<div class="level" data-level="5">
    <div class="ability" data-index="15">
        <img src="/res/icons/FlashOfLight.png" alt="">
        <p><strong>Мгновенное Исцеление</strong> - Восстанавливает 2d8+Мудрость хитов всем союзникам в радиусе 30 футов. 2 раза в день.</p>
    </div>
    <div class="ability" data-index="16">
        <img src="/res/icons/Spell_Shadow_UnholyFrenzy.png" alt="">
        <p><strong>Крик Смерти</strong> - 1d6 некротического урона и -2 к атаке врагам в радиусе 15 футов (1 раунд).</p>
    </div>
    <div class="ability" data-index="17">
        <img src="/res/icons/DivineStorm.png" alt="">
        <p><strong>Стойкость Духа</strong> - +2 к спасброскам против страха/очарования вам и союзникам (пассивно).</p>
    </div>
</div>

<!-- Уровень 7 (7 уровень персонажа) -->
<div class="level" data-level="6">
    <div class="ability" data-index="18">
        <img src="/res/icons/HolyNova.png" alt="">
        <p><strong>Светящийся Источник</strong> - Создает исцеляющий тотем (1d6 хитов за заряд, 3 заряда, используется реакцией, радиус 10 футов). Длится 10 минут (концентрация).</p>
    </div>
    <div class="ability" data-index="19">
        <img src="/res/icons/Darkness.png" alt="">
        <p><strong>Теневой Ореол</strong> - +2 КД против дальних атак на 3 раунда.</p>
    </div>
    <div class="ability" data-index="20">
        <img src="/res/icons/ConsumeMagic.png" alt="">
        <p><strong>Поглощение Магии</strong> - Снимает 1 магический эффект (проверка Мудрости).</p>
    </div>
</div>

<!-- Уровень 8 (8 уровень персонажа) -->
<div class="level" data-level="7">
    <div class="ability" data-index="21">
        <img src="/res/icons/PrayerOfMending.png" alt="">
        <p><strong>Божественный Гимн</strong> - Исцеляет союзников на 1d8/раунд в радиусе 30 футов (3 раунда, концентрация).</p>
    </div>
    <div class="ability" data-index="22">
        <img src="/res/icons/RayOfHope.png" alt="">
        <p><strong>Теневое Восстановление</strong> - Исцеляет союзника на 6d8, но наносит 6d4 урона вам.</p>
    </div>
    <div class="ability" data-index="23">
        <img src="/res/icons/SealOfFury.png" alt="">
        <p><strong>Небесная Кара</strong> - Следующая ваша атака наносит 2к8 урона некротической энергией и оглушает врага на 1 раунд.</p>
    </div>
</div>

<!-- Уровень 9 (9 уровень персонажа) -->
<div class="level" data-level="8">
    <div class="ability" data-index="24">
        <img src="/res/icons/PowerWordBarrier.png" alt="">
        <p><strong>Духовное Возрождение</strong> - Автоматически воскрешает союзника с 50% ХП при смерти (1 раз в 3 дня).</p>
    </div>
    <div class="ability" data-index="25">
        <img src="/res/icons/PlagueStrike.png" alt="">
        <p><strong>Слово Тьмы: Смерть</strong> - 5d6 урона некротической энергией (если цель выживает, вы получаете 5d6 урона).</p>
    </div>
    <div class="ability" data-index="26">
        <img src="/res/icons/Spell_Shadow_DetectLesserInvisibility.png" alt="">
        <p><strong>Чистое Сердце</strong> - Иммунитет к ядам/болезням на 4 часа (1/день).</p>
    </div>
</div>

<!-- Уровень 10 (10 уровень персонажа) -->
<div class="level" data-level="9">
    <div class="ability" data-index="27">
        <img src="/res/icons/TowerOfLight.png" alt="">
        <p><strong>Обновление</strong> - Исцеляет 1d8+Мудрость/раунд (5 раундов, только 1 цель, концентрация).</p>
    </div>
    <div class="ability" data-index="28">
        <img src="/res/icons/RuneTap.png" alt="">
        <p><strong>Нестабильное Наслаждение</strong> - 1d8 урона светом/раунд (концентрация, до 3 раундов). При снятии - взрыв на 5d6 в радиусе 20 футов (1/день).</p>
    </div>
    <div class="ability" data-index="29">
        <img src="/res/icons/Spell_Shadow_EnslaveDemon.png" alt="">
        <p><strong>Печать Жертвенности</strong> - Исцеление +50%, но вы получаете 25% от исцеленного урона (1 час, концентрация).</p>
    </div>
</div>
<!-- Уровень 11 -->
<div class="level" data-level="10">
    <!-- Светоч Веры -->
    <div class="ability" data-index="30">
        <img src="/res/icons/INV_Misc_ArmorKit_17.png" alt="">
        <p><strong>Благословение Брони</strong> (пассив)<br>Ваша броня даёт +2 к сопротивлению магии и +10% к исцелению.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="31">
        <img src="/res/icons/Ability_BackStab.png" alt="">
        <p><strong>Удар в Спину</strong> (активное)<br>Мощная атака: 3d6 + Сила (требуется фланг, 1/бой).</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="32">
        <img src="/res/icons/INV_Jewelry_Ring_15.png" alt="">
        <p><strong>Двойное Дыхание</strong> (пассив)<br>При убийстве врага восстанавливаете 1d8 хитов и 1 заряд «Прикосновения Света».</p>
    </div>
</div>

<!-- Уровень 12 -->
<div class="level" data-level="11">
    <!-- Светоч Веры -->
    <div class="ability" data-index="33">
        <img src="/res/icons/INV_Shield_09.png" alt="">
        <p><strong>Несокрушимая Вера</strong> (пассив)<br>+3 к спасброскам против страха/очарования. Раз в день автоматически стабилизируетесь при смерти.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="34">
        <img src="/res/icons/Ability_Gouge.png" alt="">
        <p><strong>Ошеломляющий Удар</strong> (активное)<br>Оглушает цель на 1 раунд (проверка Силы). Перезарядка: 2 боя.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="35">
        <img src="/res/icons/INV_Belt_15.png" alt="">
        <p><strong>Гибкая Тактика</strong> (пассив)<br>+1 к атаке и урону за каждого живого союзника в радиусе 10 футов (макс +3).</p>
    </div>
</div>

<!-- Уровень 13 -->
<div class="level" data-level="12">
    <!-- Светоч Веры -->
    <div class="ability" data-index="36">
        <img src="/res/icons/INV_Chest_Plate05.png" alt="">
        <p><strong>Доспех Просветления</strong> (пассив)<br>Уменьшает весь получаемый урон на 1к6. Нежить атакует вас с помехой.</p>
    </div>
    <!-- Теневой Покров -->
    <div class="ability" data-index="37">
        <img src="/res/icons/Ability_Sap.png" alt="">
        <p><strong>Обезвреживание</strong><br>У вас сопротивление к урону некротической энергией.</p>
    </div>
    <!-- Равновесие -->
    <div class="ability" data-index="38">
        <img src="/res/icons/INV_Bracer_07.png" alt="">
        <p><strong>Перехват</strong> (пассив)<br>Раз в раунд можете принять урон вместо союзника в радиусе 5 футов (урон снижается на 2).</p>
    </div>
</div>
            </div>
            <button id="save">Сохранить</button>
        </section>
        </div>
    <script src="/js/main.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        const className = document.body.dataset.class; // Убедись, что <body> имеет data-class="warrior"
        if (!className) {
            console.error("Не указан класс персонажа!");
            return;
        }

        const storageKey = `skillTree_${className}`;
        let skills = localStorage.getItem(storageKey) ? localStorage.getItem(storageKey).split("").map(Number) : new Array(20).fill(0);

        const levels = document.querySelectorAll(".level");

        // Обновляет UI на основе текущих данных
        function updateUI() {
            levels.forEach((level, levelIndex) => {
                level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                    ability.classList.toggle("active", skills[levelIndex] === abilityIndex + 1);
                });
            });
        }

        // Выбор или отмена выбора умения
        function handleSkillSelect(levelIndex, abilityIndex) {
            if (skills[levelIndex] === abilityIndex + 1) {
                skills[levelIndex] = 0; // Снимаем выбор
            } else {
                skills[levelIndex] = abilityIndex + 1; // Выбираем новое умение
            }
            updateUI();
        }

        // Назначаем обработчики событий на каждое умение
        levels.forEach((level, levelIndex) => {
            level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                ability.addEventListener("click", () => handleSkillSelect(levelIndex, abilityIndex));
                ability.addEventListener("touchend", (event) => {
                    event.preventDefault(); // Убирает задержку на мобильных
                    handleSkillSelect(levelIndex, abilityIndex);
                });
            });
        });

        // Кнопка "Сохранить"
        document.getElementById("save").addEventListener("click", () => {
            localStorage.setItem(storageKey, skills.join("")); // Сохраняем как строку
            alert("Умения сохранены!");
        });

        // Загружаем умения при старте
        updateUI();
    });
    </script>
    </body>
</html>