<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF–8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,500;0,700;0,800;0,900;1,400;1,500;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/class.css">
    <script src="/js/header.js"></script>
    <title>Пират</title>
</head>
            <body data-class="pirate">
                <div class="center">
                    <div class="center">
                        <section class="">
                            <h2>Пират</h2>
                            <div class="tree">
                                <h4>Описания веток</h4>
                                <div class="level">
                <div class="ability"><img src="/res/icons/questionmark.jpg" alt="">
                    <p>Абордаж - улучшение мобильности и атак в ближнем бою</p></div>
                <div class="ability">
                    <img src="/res/icons/questionmark.jpg" alt="">
                    <p>Стрельба - усиление атак из огнестрельного оружия и арбалетов</p>
                </div>
                <div class="ability">
                    <img src="/res/icons/questionmark.jpg" alt="">
                    <p>Хитрость - повышение скрытности, обмана и использования ловушек</p>
                </div>
            </div>
            <hr/>
            <div class="level" data-level="0">
                <div class="ability" data-index="0">
                    <img src="/res/icons/Ability_DualWield.png" alt="">
                    <p><strong>Парные клинки</strong> - Если вы сражаетесь двумя легкими оружиями, вы получаете +1 к броскам атаки (пассивно).</p>
                </div>
                <div class="ability" data-index="1">
                    <img src="/res/icons/Ability_Hunter_AimedShot.png" alt="">
                    <p><strong>Меткий выстрел</strong> - Первая атака из дальнобойного оружия в бою получает +2 к броску атаки (пассивно).</p>
                </div>
                <div class="ability" data-index="2">
                    <img src="/res/icons/Ability_Spy.png" alt="">
                    <p><strong>Второй шанс</strong> - При промахе с огнестрельного оружия, вы можете совершить дополнительный выстрел. (1 раз за бой)</p>
                </div>
            </div>

            <div class="level" data-level="1">
                <div class="ability" data-index="3">
                    <img src="/res/icons/Ability_Rogue_Sprint.png" alt="">
                    <p><strong>Быстрый рывок</strong> - Бонусным действием вы можете увеличить свою скорость передвижения на 10 футов до конца хода (1 раз за бой).</p>
                </div>
                <div class="ability" data-index="4">
                    <img src="/res/icons/Ability_SearingArrow.png" alt="">
                    <p><strong>Зажигательная картечь</strong> - Когда вы попадаете атакой из огнестрела, цель получает дополнительно 1к4 урона огнем (1 раз за ход).</p>
                </div>
                <div class="ability" data-index="5">
                    <img src="/res/icons/Ability_Gouge.png" alt="">
                    <p><strong>Подлый трюк</strong> - Бонусным действием вы можете попытаться ослепить противника в пределах 5 футов до конца его следующего хода пройдя проверку ловкости сложностью 16 (1 раз за бой).</p>
                </div>
            </div>

            <div class="level" data-level="2">
                <div class="ability" data-index="6">
                    <img src="/res/icons/Ability_Warrior_Charge.png" alt="">
                    <p><strong>Абордажный крюк</strong> - Совершив рывок, ваша первая атака в ближнем бою в этом ходу получает преимущество.</p>
                </div>
                <div class="ability" data-index="7">
                    <img src="/res/icons/Ability_Hunter_Quickshot.png" alt="">
                    <p><strong>Серия выстрелов</strong> - Если вы не двигались в свой ход, вы можете совершить дополнительную атаку из дальнобойного оружия бонусным действием (1 раз за ход).</p>
                </div>
                <div class="ability" data-index="8">
                    <img src="/res/icons/Ability_Rogue_Disguise.png" alt="">
                    <p><strong>Маскировка</strong> - Вы получаете преимущество на проверки Харизмы (Обман) и Ловкости (Скрытность) в течение 1 минуты (1 раз в день).</p>
                </div>
            </div>

            <div class="level" data-level="3">
                <div class="ability" data-index="9">
                    <img src="/res/icons/ShadowStrikes.png" alt="">
                    <p><strong>Вихрь клинков</strong> - Действием вы можете атаковать каждое существо по вашему выбору в пределах 5 футов от вас один раз оружием ближнего боя (1 раз в день).</p>
                </div>
                <div class="ability" data-index="10">
                    <img src="/res/icons/Ability_TheBlackArrow.png" alt="">
                    <p><strong>Отравленная пуля</strong> - Один раз за бой вы можете потратить действие, чтобы зарядить одну пулю ядом и выстрелить ей в свой следующий ход. При попадании цель должна совершить спасбросок Телосложения (Сл. 14 + ваш бонус мастерства) или получить 2к6 урона ядом и 1к4 урона ядом на протяжении 3х своих ходов.</p>
                </div>
                <div class="ability" data-index="11">
                    <img src="/res/icons/TrapLauncher.png" alt="">
                    <p><strong>Установка ловушки</strong> - Действием вы можете установить простую механическую ловушку в пределах 5 футов. Существо, наступившее на нее, получает 1к8 колющего урона (1 раз в день, ловушка существует 1 час).</p>
                </div>
            </div>

            <div class="level" data-level="4">
                <div class="ability" data-index="12">
                    <img src="/res/icons/Ability_Warrior_Disarm.png" alt="">
                    <p><strong>Обезоруживающий удар</strong> - Когда вы попадаете атакой ближнего боя, вы можете попытаться выбить оружие из рук противника (Сл. 14 + ваш бонус Силы или Ловкости по выбору, 1 раз за бой).</p>
                </div>
                <div class="ability" data-index="13">
                    <img src="/res/icons/INV_Jewelry_Ring_14.png" alt="">
                    <p><strong>Прицельная стрельба</strong> - Вы можете потратить основное либо доп.действие на прицеливание в слабую точку врага во время своего хода, на ваш следующий ход бросок попадания из этого оружия получает максимальное значение (но не крит) и наносит дополнительно 1к8 урона при попадании.</p>
                </div>
                <div class="ability" data-index="14">
                    <img src="/res/icons/Ability_Vanish.png" alt="">
                    <p><strong>Исчезновение в тенях</strong> - Бонусным действием вы можете стать невидимым на 3 минуты, или до совершения атаки (1 раз в день).</p>
                </div>
            </div>

                    <div class="level" data-level="5">
            <div class="ability" data-index="15">
                <img src="/res/icons/Ability_Kick.png" alt="">
                <p><strong>Пинок с разбега</strong> - Если перед рукопашной атакой вы преодолели 20 футов, то наносите дополнительно 1к6 дробящего урона и отталкиваете цель на 5 футов.</p>
            </div>
            <div class="ability" data-index="16">
                <img src="/res/icons/Ability_TrueShot.png" alt="">
                <p><strong>Верный выстрел</strong> - Один раз за бой вы можете совершить выстрел, который игнорирует половину КЗ и сопротивление к немагическому и колющему урону цели.</p>
            </div>
            <div class="ability" data-index="17">
                <img src="/res/icons/Ability_Sap.png" alt="">
                <p><strong>Оглушающий удар</strong> - Совершив успешную скрытую атаку оружием ближнего боя по существу, которое вас не видит, вы можете попытаться оглушить его до конца вашего следующего хода (Сл. 15 + ваш бонус Ловкости, 1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="6">
            <div class="ability" data-index="18">
                <img src="/res/icons/Ability_Warrior_Sunder.png" alt="">
                <p><strong>Рассекающий удар</strong> - Попадая атакой ближнего боя, вы можете наложить эффект "кровотечение" на цель без крита. Эффект длится 3 раунда или пока цель не совершит действие для остановки кровотечения (1 раз за бой).</p>
            </div>
            <div class="ability" data-index="19">
                <img src="/res/icons/BarbedShot.png" alt="">
                <p><strong>Зазубренный выстрел</strong> - Ваш критический выстрел из дальнобойного оружия наносит дополнительно 1к8 колющего урона и снижает скорость передвижения цели на 10 футов до конца ее следующего хода. (Пассивно)</p>
            </div>
            <div class="ability" data-index="20">
                <img src="/res/icons/Ability_Rogue_Feint.png" alt="">
                <p><strong>Обманный маневр</strong> - Бонусным действием вы можете создать иллюзию своего передвижения. До конца вашего хода вы получаете преимущество на первую атаку в ближнем бою, а противники атакуют вас с помехой (1 раз за бой).</p>
            </div>
        </div>

        <div class="level" data-level="7">
            <div class="ability" data-index="21">
                <img src="/res/icons/Ability_Warrior_Riposte.png" alt="">
                <p><strong>Контратака</strong> - Если противник промахивается по вам атакой ближнего боя, вы можете реакцией совершить одну атаку ближнего боя по этому противнику с преимуществом (1 раз за раунд).</p>
            </div>
            <div class="ability" data-index="22">
                <img src="/res/icons/Ability_GolemStormBolt.png" alt="">
                <p><strong>Веерный огонь</strong> - Действием вы можете совершить два выстрела из дальнобойного оружия по двум целям, находящимся в пределах 10 футов друг от друга.</p>
            </div>
            <div class="ability" data-index="23">
                <img src="/res/icons/Ability_Poisons.png" alt="">
                <p><strong>Ядовитый укол</strong> - Ваша первая успешная скрытая атака в бою наносит дополнительно 2к4 урона ядом.</p>
            </div>
        </div>

        <div class="level" data-level="8">
            <div class="ability" data-index="24">
                <img src="/res/icons/Ability_Warrior_ShieldBash.png" alt="">
                <p><strong>Удар щитом</strong> - После успешной атаки в ближнем бою, вы можете бонусным действием попытаться оттолкнуть цель на 10 футов. Цель должна пройти спасбросок Силы (Сл. 14 + ваш бонус мастерства) или быть оттолкнута.</p>
            </div>
            <div class="ability" data-index="25">
                <img src="/res/icons/TrapLauncher.png" alt="">
                <p><strong>Улучшенная ловушка</strong> - Ваша ловушка, установленная умением "Установка ловушки", теперь наносит 2к8 колющего урона, и существо, попавшее в нее, должно пройти спасбросок Ловкости (Сл. 14 + ваш бонус мастерства) или быть опутанным до конца своего следующего хода (Пассивно).</p>
            </div>
            <div class="ability" data-index="26">
                <img src="/res/icons/Ability_TheBlackArrow.png" alt="">
                <p><strong>Быстрые атаки</strong> - Вы можете совершать 2 атаки за ход тратя одно действие. (Пассивно)</p>
            </div>
        </div>

        <div class="level" data-level="9">
            <div class="ability" data-index="27">
                <img src="/res/icons/Ability_Warrior_InnerRage.png" alt="">
                <p><strong>Внутренняя ярость</strong> - Когда ваше ОЗ падает ниже четверти (не работает, если вы недееспособны), вы входите в состояние ярости на 1 минуту. В этом состоянии вы получаете преимущество на броски атак ближнего боя и спасброски (Пассивно).</p>
            </div>
            <div class="ability" data-index="28">
                <img src="/res/icons/Ability_Hunter_Pet_Wolf.png" alt="">
                <p><strong>Призыв верного зверя</strong> - Вы можете призвать говорящего, призрачного попугая на 10 минут. Попугай занимает клетку, которую вы выбираете в пределах 30 футов, он ходит сразу после вас, если находится в бою и может совершать одну атаку укусом в свой ход (1к6 колющего урона). Вы можете бонусным действием перемещать попугая на 30 футов (1 раз в день).</p>
            </div>
            <div class="ability" data-index="29">
                <img src="/res/icons/IceLance.png" alt="">
                <p><strong>Завеса теней</strong> - Действием вы создаете облако дыма в радиусе 10 футов, которое длится 1 минуту. Облако сильно заслоняет область, и существа, находящиеся в нем, считаются невидимыми. Вы можете видеть сквозь это облако, а атаки по союзным целям внутри облака совершаются с помехой. (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="10">
            <div class="ability" data-index="30">
                <img src="/res/icons/Ability_Warrior_WarCry.png" alt="">
                <p><strong>Боевой клич</strong> - Действием вы издаете устрашающий клич. Все враги в пределах 30 футов, которые могут вас слышать, должны совершить спасбросок Мудрости (Сл. 15 + ваш бонус Харизмы) или быть испуганными до конца вашего следующего хода (1 раз в день).</p>
            </div>
            <div class="ability" data-index="31">
                <img src="/res/icons/RapidFire.png" alt="">
                <p><strong>Шквальный огонь</strong> - Доп.действием вы совершаете две атаки из дальнобойного оружия по одной цели.</p>
            </div>
            <div class="ability" data-index="32">
                <img src="/res/icons/Ability_Rogue_KidneyShot.png" alt="">
                <p><strong>Удар по почкам</strong> - Совершив успешную скрытую атаку оружием ближнего боя, вы можете попытаться вывести цель из строя до конца своего следующего хода. Цель должна совершить спасбросок Телосложения (Сл. 16 + ваш бонус Ловкости) или ее скорость станет равной 0, и она не сможет совершать реакции до конца боя (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="11">
            <div class="ability" data-index="33">
                <img src="/res/icons/Ability_Warrior_ShieldWall.png" alt="">
                <p><strong>Усиливающее пойло</strong> - Действием вы можете глотнуть рома, получая +3 к КД до начала своего следующего хода. Пока вы используете это умение, ваша скорость передвижения уменьшается на половину (1 раз в день).</p>
            </div>
            <div class="ability" data-index="34">
                <img src="/res/icons/Ability_Hunter_Pet_Bear.png" alt="">
                <p><strong>Постоянный спунтик</strong> - Ваш попугай становится постоянным компаньоном, если он умирает, то его можно призвать со следующим восходом солнца.</p>
            </div>
            <div class="ability" data-index="35">
                <img src="/res/icons/Ability_Rogue_Rupture.png" alt="">
                <p><strong>Кровопускание</strong> - Совершив успешную скрытую атаку колющим оружием, вы можете наложить эффект "кровотечение" на цель. Эффект длится 5 раундов без возможности остановить его раньше (1 раз в бой).</p>
            </div>
        </div>

        <div class="level" data-level="12">
            <div class="ability" data-index="36">
                <img src="/res/icons/Ability_Warrior_Challange.png" alt="">
                <p><strong>Вызов</strong> - Бонусным действием вы можете заставить одно существо в пределах 30 футов совершить спасбросок Мудрости (Сл. 16 + ваш бонус Харизмы). При провале существо получает помеху на броски атаки по всем целям, кроме вас, до конца своего следующего хода (1 раз в бой).</p>
            </div>
            <div class="ability" data-index="37">
                <img src="/res/icons/Ability_Hunter_AspectOfTheMonkey.png" alt="">
                <p><strong>Аспект обезьяны</strong> - Пока вы не носите тяжелую броню, вы получаете преимущество на спасброски Ловкости.</p>
            </div>
            <div class="ability" data-index="38">
                <img src="/res/icons/Ability_Rogue_Eviscerate.png" alt="">
                <p><strong>Потрошение</strong> - После успешной скрытой атаки оружием ближнего боя, вы можете потратить бонусное действие, чтобы нанести дополнительно 2к8 некротического урона. Цель должна совершить спасбросок Телосложения (Сл. 16 + ваш бонус Ловкости) или ее максимальное количество хитов уменьшится на нанесенный урон до окончания долгого отдыха (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="13">
            <div class="ability" data-index="39">
                <img src="/res/icons/Ability_Warrior_SavageBlow.png" alt="">
                <p><strong>Дикий удар</strong> - Если вы совершаете критическое попадание атакой ближнего боя, вы наносите дополнительную кость урона оружия.</p>
            </div>
            <div class="ability" data-index="40">
                <img src="/res/icons/Ability_Hunter_Pet_Raptor.png" alt="">
                <p><strong>Усиление спутника</strong> - ваш попугай теперь может делать 2 действия в свой ход.</p>
            </div>
            <div class="ability" data-index="41">
                <img src="/res/icons/Ability_Rogue_Trip.png" alt="">
                <p><strong>Подсечка</strong> - Совершив успешную скрытую атаку оружием ближнего боя, вы можете бонусным действием попытаться сбить цель с ног. Цель должна совершить спасбросок Силы (Сл. 17 + ваш бонус Ловкости) или упадет ничком.</p>
            </div>
        </div>

        <div class="level" data-level="14">
            <div class="ability" data-index="42">
                <img src="/res/icons/Ability_Warrior_DecisiveStrike.png" alt="">
                <p><strong>Решающий удар</strong> - Один раз за бой, совершая атаку действием, вы можете дополнительно нанести 2к6 урона при попадании.</p>
            </div>
            <div class="ability" data-index="43">
                <img src="/res/icons/Ability_Hunter_EagleEye.png" alt="">
                <p><strong>Орлиный глаз</strong> - Вы получаете преимущество на проверки Восприятия, связанные со зрением, и дальность ваших атак из дальнобойного оружия увеличивается на 15 футов.</p>
            </div>
            <div class="ability" data-index="44">
                <img src="/res/icons/ShadowDance.png" alt="">
                <p><strong>Танец теней</strong> - Бонусным действием вы можете войти в состояние "танца теней" на 1 раунд. Пока вы находитесь в этом состоянии, вы получаете преимущество на броски атаки, совершенные в состоянии скрытности, и после совершения атаки можете бонусным действием попытаться спрятаться, даже если находитесь на виду (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="15">
            <div class="ability" data-index="45">
                <img src="/res/icons/Ability_Throw.png" alt="">
                <p><strong>Мощный бросок</strong> - Вы можете швырнуть своё оружие с криком «Отведай стали, сухопутная крыса!» во врага и попытаться сбить его с ног при успешной проверке ловкости.</p>
            </div>
            <div class="ability" data-index="46">
                <img src="/res/icons/WildQuiver.png" alt="">
                <p><strong>Неиссякаемый колчан</strong> - Один раз в день вы можете восстановить все потраченные боеприпасы для дальнобойного оружия.</p>
            </div>
            <div class="ability" data-index="47">
                <img src="/res/icons/PoisonedKnife.png" alt="">
                <p><strong>Отравленный клинок</strong> - Ваши успешные скрытые атаки оружием ближнего боя наносят дополнительно 1к8 урона ядом.</p>
            </div>
        </div>

        <div class="level" data-level="16">
            <div class="ability" data-index="48">
                <img src="/res/icons/Ability_ThunderClap.png" alt="">
                <p><strong>Удар грома</strong> - Действием вы можете ударить по земле, создавая сотрясающую волну. Все существа в пределах 15 футов от вас должны совершить спасбросок Силы (Сл. 17 + ваш бонус Силы) или будут сбиты с ног(1 раз в день).</p>
            </div>
            <div class="ability" data-index="49">
                <img src="/res/icons/SteelTrap.png" alt="">
                <p><strong>Стальная ловушка</strong> - Ваша ловушка, установленная умением "Установка ловушки", теперь удерживает существо до тех пор, пока оно действием не совершит успешную проверку Силы (Сл. 15 + ваш бонус мастерства) или Ловкости (Акробатика) (Сл. 15 + ваш бонус мастерства) по своему выбору.</p>
            </div>
            <div class="ability" data-index="50">
                <img src="/res/icons/Ability_Rogue_Garrote.png" alt="">
                <p><strong>Удавка</strong> - Совершив успешную скрытую атаку оружием ближнего боя по существу, которое вас не видит и не слышит, вы можете попытаться наложить эффект "удушение". Цель должна совершать спасброски Телосложения в начале каждого своего хода (Сл. 18 + ваш бонус Ловкости). При трех провалах цель падает без сознания на 1 минуту (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="17">
            <div class="ability" data-index="51">
                <img src="/res/icons/Ability_ShockWave.png" alt="">
                <p><strong>Ударная волна</strong> - После успешного поапдания умением (Прицельная стрельба) вы можете бонусным действием создать ударную волну в линии длиной 30 футов и шириной 5 футов за целью. Все существа в этой области (в том числе и союзные) должны совершить спасбросок Силы (Сл. 16 + ваш бонус Силы) или быть сбитыми с ног.</p>
            </div>
            <div class="ability" data-index="52">
                <img src="/res/icons/Ability_Hunter_Pet_Spider.png" alt="">
                <p><strong>Удар розочкой</strong> -  Действием вы можете разбить свою бутылку рома о пятку и нанести ей удар, который игнорирует КЗ цели. Цель должна совершить спасбросок Телосложения (Сл. 14 + ваш бонус мастерства) или быть отравленной и получать 1к8 урона ядом на протяжении 3х ходов (1 раз в день).</p>
            </div>
            <div class="ability" data-index="53">
                <img src="/res/icons/Ability_Vanish.png" alt="">
                <p><strong>Совершенное исчезновение</strong> - Бонусным действием вы можете стать невидимым на 10 минут. В течение этого времени вы получаете преимущество на броски атаки и спасброски Ловкости (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="18">
            <div class="ability" data-index="54">
                <img src="/res/icons/Ability_Racial_Avatar.png" alt="">
                <p><strong>Злой пират</strong> - Один раз в день вы можете действием войти в состояние "Злого пирата" на 1 минуту. Пока вы находитесь в этом состоянии, ваши броски атаки и урона в ближнем бою увеличиваются на +2, а ваши спасброски Силы и Телосложения совершаются с преимуществом.</p>
            </div>
            <div class="ability" data-index="55">
                <img src="/res/icons/Totem.png" alt="">
                <p><strong>Аура верного выстрела</strong> - Пока вы не недееспособны, союзники в пределах 10 футов от вас получают +1 к броскам атаки из дальнобойного оружия.</p>
            </div>
            <div class="ability" data-index="56">
                <img src="/res/icons/MurderSpree.png" alt="">
                <p><strong>Серия убийств</strong> - Если вы сбиваете существо до 0 хитов в свой ход, вы можете бонусным действием немедленно совершить одну атаку оружием ближнего боя по другому существу в пределах досягаемости, при успешном попадании цель теряет 50% текущих хитов (1 раз в день).</p>
            </div>
        </div>

        <div class="level" data-level="19">
            <div class="ability" data-index="57">
                <img src="/res/icons/Ability_GolemThunderClap.png" alt="">
                <p><strong>Героический прыжок</strong> - Не тратя действие вы можете прыгнуть на расстояние до 30 футов в видимую вами точку. Все существа в радиусе 10 футов от точки приземления должны совершить спасбросок Ловкости (Сл. 18 + ваш бонус Силы) или быть сбитыми с ног (2 раза за бой).</p>
            </div>
            <div class="ability" data-index="58">
                <img src="/res/icons/Ability_Hunter_EagleEye.png" alt="">
                <p><strong>Аспект орла</strong> - Пока вы не носите тяжелую броню, ваша скорость передвижения увеличивается на 10 футов, и вы не получаете помеху на броски дальнобойных атак, находясь на большом расстоянии.</p>
            </div>
            <div class="ability" data-index="59">
                <img src="/res/icons/LunarGuidance.png" alt="">
                <p><strong>Удар из тени</strong> - Если вы совершаете скрытую атаку, находясь в состоянии невидимости, вы наносите дополнительно 4к8 некротического урона.</p>
            </div>
        </div>

                <button id="save">Сохранить</button>
            </section>
        </div>
    </div>
    <script src="/js/main.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
    const className = document.body.dataset.class; // Убедись, что <body> имеет data-class="warrior"
    if (!className) {
        console.error("Не указан класс персонажа!");
        return;
    }

    const storageKey = `skillTree_${className}`;
    let skills = localStorage.getItem(storageKey) ? localStorage.getItem(storageKey).split("").map(Number) : new Array(20).fill(0);

    const levels = document.querySelectorAll(".level");

    // Обновляет UI на основе текущих данных
    function updateUI() {
        levels.forEach((level, levelIndex) => {
            level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
                ability.classList.toggle("active", skills[levelIndex] === abilityIndex + 1);
            });
        });
    }

    // Выбор или отмена выбора умения
    function handleSkillSelect(levelIndex, abilityIndex) {
        if (skills[levelIndex] === abilityIndex + 1) {
            skills[levelIndex] = 0; // Снимаем выбор
        } else {
            skills[levelIndex] = abilityIndex + 1; // Выбираем новое умение
        }
        updateUI();
    }

    // Назначаем обработчики событий на каждое умение
    levels.forEach((level, levelIndex) => {
        level.querySelectorAll(".ability").forEach((ability, abilityIndex) => {
            ability.addEventListener("click", () => handleSkillSelect(levelIndex, abilityIndex));
            ability.addEventListener("touchend", (event) => {
                event.preventDefault(); // Убирает задержку на мобильных
                handleSkillSelect(levelIndex, abilityIndex);
            });
        });
    });

    // Кнопка "Сохранить"
    document.getElementById("save").addEventListener("click", () => {
        localStorage.setItem(storageKey, skills.join("")); // Сохраняем как строку
        alert("Умения сохранены!");
    });

    // Загружаем умения при старте
    updateUI();
});
</script>
</body>
</html>
